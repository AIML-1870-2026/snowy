<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purplejack</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2a1745;
            background-image:
                url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E"),
                radial-gradient(ellipse at center, #3d2066 0%, #2a1745 50%, #1a0f2e 100%);
            background-blend-mode: overlay, normal;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            color: #e8d5f7;
        }
        .game-container {
            width: 100%;
            max-width: 800px;
        }
        .info-bar {
            display: flex;
            justify-content: space-between;
            background: rgba(75, 45, 110, 0.8);
            padding: 15px 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #9b6dd1;
        }
        .info-item {
            text-align: center;
            position: relative;
        }
        .info-item.bankroll-container {
            overflow: visible;
        }
        .firework {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: firework 1s ease-out forwards;
            pointer-events: none;
        }
        @keyframes firework {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }
        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffd700;
            border-radius: 50%;
            animation: sparkle 0.6s ease-out forwards;
            pointer-events: none;
        }
        @keyframes sparkle {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                transform: scale(1.5);
                opacity: 1;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }
        .win-glow {
            animation: winGlow 1s ease-in-out;
        }
        @keyframes winGlow {
            0%, 100% {
                text-shadow: none;
            }
            50% {
                text-shadow: 0 0 20px #ffd700, 0 0 40px #ffa500, 0 0 60px #ff6600;
            }
        }
        .info-label {
            font-size: 0.85rem;
            color: #c9b0e8;
            margin-bottom: 5px;
        }
        .info-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #f0e6ff;
        }
        .table {
            background-color: #4a2c7a;
            background-image:
                url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='felt'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23felt)'/%3E%3C/svg%3E");
            background-blend-mode: soft-light;
            border-radius: 20px;
            padding: 30px;
            border: 12px solid #5c3d1e;
            box-shadow:
                inset 0 0 50px rgba(0,0,0,0.3),
                0 10px 30px rgba(0,0,0,0.5),
                0 0 0 4px #8b6914,
                0 0 0 8px #5c3d1e;
        }
        .hand {
            min-height: 140px;
            margin-bottom: 20px;
        }
        .hand-label {
            font-size: 1.1rem;
            color: #c9b0e8;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .hand-value {
            background: #6b3fa0;
            padding: 3px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
        .cards {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            perspective: 1000px;
        }
        .card-container {
            width: 70px;
            height: 100px;
            perspective: 1000px;
        }
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
        }
        .card.flipped {
            transform: rotateY(180deg);
        }
        .card.deal-animation {
            animation: dealCard 0.6s ease forwards;
        }
        @keyframes dealCard {
            0% {
                transform: rotateY(0deg) translateX(-100px) scale(0.5);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: rotateY(180deg) translateX(0) scale(1);
            }
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            box-shadow: 2px 2px 8px rgba(0,0,0,0.3);
        }
        .card-front {
            background: white;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            transform: rotateY(180deg);
        }
        .card-front.red {
            color: #c41e3a;
        }
        .card-front.black {
            color: #1a1a2e;
        }
        .card-back {
            background: linear-gradient(135deg, #5c3d8c 0%, #3d2066 100%);
            border: 2px solid #9b6dd1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .card-back::before {
            content: "";
            width: 50px;
            height: 70px;
            border: 2px solid #9b6dd1;
            border-radius: 4px;
            background: repeating-linear-gradient(
                45deg,
                #4a2c7a,
                #4a2c7a 5px,
                #3d2066 5px,
                #3d2066 10px
            );
        }
        .card-corner {
            line-height: 1;
        }
        .card-corner.bottom {
            align-self: flex-end;
            transform: rotate(180deg);
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        button {
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .btn-primary {
            background: linear-gradient(135deg, #9b6dd1 0%, #7b4db8 100%);
            color: white;
        }
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #ab7de1 0%, #8b5dc8 100%);
            transform: translateY(-2px);
        }
        .btn-danger {
            background: linear-gradient(135deg, #c41e3a 0%, #8b1528 100%);
            color: white;
        }
        .btn-danger:hover:not(:disabled) {
            background: linear-gradient(135deg, #d42e4a 0%, #9b2538 100%);
            transform: translateY(-2px);
        }
        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            color: white;
        }
        .btn-success:hover:not(:disabled) {
            background: linear-gradient(135deg, #38b755 0%, #2e8e44 100%);
            transform: translateY(-2px);
        }
        .betting-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .bet-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .bet-input label {
            color: #c9b0e8;
        }
        .bet-input input {
            width: 100px;
            padding: 10px;
            font-size: 1.1rem;
            border: 2px solid #7b4db8;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            text-align: center;
        }
        .bet-input input:focus {
            outline: none;
            border-color: #9b6dd1;
        }
        .chip-buttons {
            display: flex;
            gap: 8px;
        }
        .chip {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 3px dashed rgba(255,255,255,0.5);
            font-weight: bold;
            font-size: 0.85rem;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }
        .chip:hover {
            transform: scale(1.1);
        }
        .chip-5 { background: #c41e3a; color: white; }
        .chip-10 { background: #2563eb; color: white; }
        .chip-25 { background: #16a34a; color: white; }
        .chip-100 { background: #1a1a2e; color: white; }
        .message {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            padding: 15px;
            margin-top: 20px;
            border-radius: 10px;
            display: none;
        }
        .message.show {
            display: block;
        }
        .message.win {
            background: rgba(40, 167, 69, 0.3);
            border: 2px solid #28a745;
            color: #7dff9d;
        }
        .message.lose {
            background: rgba(196, 30, 58, 0.3);
            border: 2px solid #c41e3a;
            color: #ff8a9d;
        }
        .message.push {
            background: rgba(155, 109, 209, 0.3);
            border: 2px solid #9b6dd1;
            color: #e8d5f7;
        }
        .message.blackjack {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.3) 0%, rgba(255, 165, 0, 0.3) 100%);
            border: 2px solid #ffd700;
            color: #ffd700;
        }
        .divider {
            height: 2px;
            background: linear-gradient(90deg, transparent, #7b4db8, transparent);
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>♠ Purplejack ♥</h1>

    <div class="game-container">
        <div class="info-bar">
            <div class="info-item bankroll-container" id="bankroll-container">
                <div class="info-label">Bankroll</div>
                <div class="info-value" id="bankroll-value">$<span id="bankroll">1000</span></div>
            </div>
            <div class="info-item">
                <div class="info-label">Current Bet</div>
                <div class="info-value">$<span id="current-bet">0</span></div>
            </div>
            <div class="info-item">
                <div class="info-label">Wins / Losses</div>
                <div class="info-value"><span id="wins">0</span> / <span id="losses">0</span></div>
            </div>
        </div>

        <div class="table">
            <div class="hand">
                <div class="hand-label">
                    Dealer's Hand
                    <span class="hand-value" id="dealer-value">0</span>
                </div>
                <div class="cards" id="dealer-cards"></div>
            </div>

            <div class="divider"></div>

            <div class="hand">
                <div class="hand-label">
                    Your Hand
                    <span class="hand-value" id="player-value">0</span>
                </div>
                <div class="cards" id="player-cards"></div>
            </div>

            <div class="message" id="message"></div>

            <div class="betting-controls" id="betting-controls">
                <div class="bet-input">
                    <label>Bet: $</label>
                    <input type="number" id="bet-amount" value="10" min="5" max="500">
                </div>
                <div class="chip-buttons">
                    <button class="chip chip-5" onclick="addToBet(5)">$5</button>
                    <button class="chip chip-10" onclick="addToBet(10)">$10</button>
                    <button class="chip chip-25" onclick="addToBet(25)">$25</button>
                    <button class="chip chip-100" onclick="addToBet(100)">$100</button>
                </div>
                <button class="btn-primary" onclick="startGame()">Deal</button>
            </div>

            <div class="controls" id="game-controls" style="display: none;">
                <button class="btn-primary" id="hit-btn" onclick="hit()">Hit</button>
                <button class="btn-success" id="stand-btn" onclick="stand()">Stand</button>
            </div>

            <div class="controls" id="end-controls" style="display: none;">
                <button class="btn-primary" onclick="newRound()">New Hand</button>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let deck = [];
        let playerHand = [];
        let dealerHand = [];
        let bankroll = 1000;
        let currentBet = 0;
        let wins = 0;
        let losses = 0;
        let gameInProgress = false;

        // Card suits and ranks
        const suits = ['♠', '♥', '♦', '♣'];
        const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];

        // Create a fresh deck
        function createDeck() {
            deck = [];
            for (let suit of suits) {
                for (let rank of ranks) {
                    deck.push({ suit, rank });
                }
            }
            // Verify deck has 52 cards
            if (deck.length !== 52) {
                console.error('Deck creation error: Expected 52 cards, got ' + deck.length);
            }
        }

        // Fisher-Yates shuffle
        function shuffleDeck() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        // Get card value
        function getCardValue(card) {
            if (['J', 'Q', 'K'].includes(card.rank)) return 10;
            if (card.rank === 'A') return 11;
            return parseInt(card.rank);
        }

        // Calculate hand value with Ace handling
        function calculateHandValue(hand) {
            let value = 0;
            let aces = 0;

            for (let card of hand) {
                value += getCardValue(card);
                if (card.rank === 'A') aces++;
            }

            // Convert Aces from 11 to 1 if needed
            while (value > 21 && aces > 0) {
                value -= 10;
                aces--;
            }

            return value;
        }

        // Check if hand is a Purplejack (natural 21 with 2 cards)
        function isPurplejack(hand) {
            return hand.length === 2 && calculateHandValue(hand) === 21;
        }

        // Deal a card
        function dealCard() {
            if (deck.length === 0) {
                createDeck();
                shuffleDeck();
            }
            return deck.pop();
        }

        // Render a card
        function renderCard(card, hidden = false, animate = false) {
            const isRed = card.suit === '♥' || card.suit === '♦';
            const colorClass = isRed ? 'red' : 'black';
            const flipClass = hidden ? '' : 'flipped';
            const animClass = animate ? 'deal-animation' : flipClass;

            return `
                <div class="card-container">
                    <div class="card ${animClass}">
                        <div class="card-back card-face"></div>
                        <div class="card-front card-face ${colorClass}">
                            <div class="card-corner">${card.rank}${card.suit}</div>
                            <div class="card-corner bottom">${card.rank}${card.suit}</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Update the display
        function updateDisplay(hideDealer = true, animate = false) {
            // Render dealer cards
            const dealerCardsEl = document.getElementById('dealer-cards');
            let dealerHTML = '';
            dealerHand.forEach((card, index) => {
                if (hideDealer && index === 1) {
                    dealerHTML += renderCard(card, true, false);
                } else {
                    dealerHTML += renderCard(card, false, animate);
                }
            });
            dealerCardsEl.innerHTML = dealerHTML;

            // Render player cards
            const playerCardsEl = document.getElementById('player-cards');
            playerCardsEl.innerHTML = playerHand.map(card => renderCard(card, false, animate)).join('');

            // Update values
            const playerValue = calculateHandValue(playerHand);
            let dealerValue = 0;
            let dealerDisplay = '0';

            if (dealerHand.length > 0) {
                if (hideDealer && dealerHand.length > 1) {
                    dealerValue = getCardValue(dealerHand[0]);
                    dealerDisplay = dealerValue + ' + ?';
                } else if (hideDealer && dealerHand.length === 1) {
                    dealerValue = getCardValue(dealerHand[0]);
                    dealerDisplay = dealerValue.toString();
                } else {
                    dealerValue = calculateHandValue(dealerHand);
                    dealerDisplay = dealerValue.toString();
                }
            }

            document.getElementById('player-value').textContent = playerValue;
            document.getElementById('dealer-value').textContent = dealerDisplay;

            // Update info bar
            document.getElementById('bankroll').textContent = bankroll;
            document.getElementById('current-bet').textContent = currentBet;
            document.getElementById('wins').textContent = wins;
            document.getElementById('losses').textContent = losses;
        }

        // Flip the dealer's hidden card with animation
        function revealDealerCard() {
            const dealerCardsEl = document.getElementById('dealer-cards');
            const hiddenCard = dealerCardsEl.querySelectorAll('.card')[1];
            if (hiddenCard && !hiddenCard.classList.contains('flipped')) {
                hiddenCard.classList.add('flipped');
            }
        }

        // Create fireworks around the bankroll
        function createFireworks() {
            const container = document.getElementById('bankroll-container');
            const bankrollValue = document.getElementById('bankroll-value');
            const colors = ['#ffd700', '#ff6600', '#ff00ff', '#00ff00', '#00ffff', '#ff0066'];

            // Add glow effect to bankroll
            bankrollValue.classList.add('win-glow');
            setTimeout(() => bankrollValue.classList.remove('win-glow'), 1000);

            // Create multiple firework bursts
            for (let burst = 0; burst < 3; burst++) {
                setTimeout(() => {
                    for (let i = 0; i < 12; i++) {
                        const firework = document.createElement('div');
                        firework.className = 'firework';
                        const angle = (i / 12) * Math.PI * 2;
                        const distance = 40 + Math.random() * 30;
                        const tx = Math.cos(angle) * distance;
                        const ty = Math.sin(angle) * distance;
                        firework.style.setProperty('--tx', tx + 'px');
                        firework.style.setProperty('--ty', ty + 'px');
                        firework.style.background = colors[Math.floor(Math.random() * colors.length)];
                        firework.style.left = '50%';
                        firework.style.top = '50%';
                        firework.style.animationDelay = (Math.random() * 0.2) + 's';
                        container.appendChild(firework);
                        setTimeout(() => firework.remove(), 1200);
                    }
                }, burst * 200);
            }

            // Add sparkles
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = (20 + Math.random() * 60) + '%';
                    sparkle.style.top = (20 + Math.random() * 60) + '%';
                    container.appendChild(sparkle);
                    setTimeout(() => sparkle.remove(), 600);
                }, Math.random() * 500);
            }
        }

        // Show message
        function showMessage(text, type) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = 'message show ' + type;
        }

        // Hide message
        function hideMessage() {
            document.getElementById('message').className = 'message';
        }

        // Add to bet
        function addToBet(amount) {
            const betInput = document.getElementById('bet-amount');
            let currentValue = parseInt(betInput.value) || 0;
            betInput.value = Math.min(currentValue + amount, bankroll);
        }

        // Start a new game
        function startGame() {
            const betAmount = parseInt(document.getElementById('bet-amount').value);

            if (betAmount < 5) {
                alert('Minimum bet is $5');
                return;
            }
            if (betAmount > bankroll) {
                alert('You don\'t have enough money for that bet!');
                return;
            }

            currentBet = betAmount;
            bankroll -= currentBet;
            gameInProgress = true;

            // Create and shuffle deck
            createDeck();
            shuffleDeck();

            // Deal initial cards with animation
            playerHand = [];
            dealerHand = [];

            hideMessage();

            // Show/hide controls
            document.getElementById('betting-controls').style.display = 'none';
            document.getElementById('game-controls').style.display = 'flex';
            document.getElementById('end-controls').style.display = 'none';

            // Disable buttons during deal
            document.getElementById('hit-btn').disabled = true;
            document.getElementById('stand-btn').disabled = true;

            // Deal cards sequentially with animation
            const cards = [
                { target: 'player', card: dealCard() },
                { target: 'dealer', card: dealCard() },
                { target: 'player', card: dealCard() },
                { target: 'dealer', card: dealCard() }
            ];

            let dealIndex = 0;
            function dealNextCard() {
                if (dealIndex < cards.length) {
                    const { target, card } = cards[dealIndex];
                    if (target === 'player') {
                        playerHand.push(card);
                    } else {
                        dealerHand.push(card);
                    }
                    updateDisplay(true, true);
                    dealIndex++;
                    setTimeout(dealNextCard, 300);
                } else {
                    // All cards dealt, enable controls
                    document.getElementById('hit-btn').disabled = false;
                    document.getElementById('stand-btn').disabled = false;

                    // Check for immediate blackjacks
                    const playerBJ = isPurplejack(playerHand);
                    const dealerBJ = isPurplejack(dealerHand);

                    if (playerBJ || dealerBJ) {
                        // Reveal dealer's hand
                        setTimeout(() => {
                            revealDealerCard();
                            setTimeout(() => {
                                updateDisplay(false);
                                endGame(playerBJ, dealerBJ);
                            }, 600);
                        }, 300);
                    }
                }
            }

            dealNextCard();
        }

        // Player hits
        function hit() {
            document.getElementById('hit-btn').disabled = true;
            document.getElementById('stand-btn').disabled = true;

            playerHand.push(dealCard());
            updateDisplay(true, true);

            // Wait for animation to complete
            setTimeout(() => {
                const playerValue = calculateHandValue(playerHand);
                if (playerValue > 21) {
                    // Player busts
                    revealDealerCard();
                    setTimeout(() => {
                        updateDisplay(false);
                        losses++;
                        showMessage('Bust! You lose $' + currentBet, 'lose');
                        endRound();
                    }, 600);
                } else if (playerValue === 21) {
                    // Auto-stand on 21
                    stand();
                } else {
                    // Re-enable buttons
                    document.getElementById('hit-btn').disabled = false;
                    document.getElementById('stand-btn').disabled = false;
                }
            }, 600);
        }

        // Player stands
        function stand() {
            // Disable buttons
            document.getElementById('hit-btn').disabled = true;
            document.getElementById('stand-btn').disabled = true;

            // Reveal dealer's hole card with animation
            revealDealerCard();

            // Wait for flip animation, then dealer plays
            setTimeout(() => {
                updateDisplay(false);
                dealerPlay();
            }, 600);
        }

        // Dealer's turn
        function dealerPlay() {
            let dealerValue = calculateHandValue(dealerHand);

            function dealerDrawNext() {
                if (dealerValue < 17) {
                    dealerHand.push(dealCard());
                    updateDisplay(false, true);
                    dealerValue = calculateHandValue(dealerHand);
                    setTimeout(dealerDrawNext, 700);
                } else {
                    // Determine winner
                    setTimeout(determineWinner, 300);
                }
            }

            dealerDrawNext();
        }

        // End game for blackjack scenarios
        function endGame(playerBJ, dealerBJ) {
            if (playerBJ && dealerBJ) {
                // Both have blackjack - Push
                bankroll += currentBet;
                showMessage('Both have Purplejack! Push - Bet returned', 'push');
            } else if (playerBJ) {
                // Player has blackjack - 3:2 payout
                const winnings = Math.floor(currentBet * 2.5);
                bankroll += winnings;
                wins++;
                showMessage('Purplejack! You win $' + (winnings - currentBet) + '!', 'blackjack');
                createFireworks();
            } else if (dealerBJ) {
                // Dealer has blackjack
                losses++;
                showMessage('Dealer has Purplejack! You lose $' + currentBet, 'lose');
            }
            endRound();
        }

        // Determine the winner
        function determineWinner() {
            const playerValue = calculateHandValue(playerHand);
            const dealerValue = calculateHandValue(dealerHand);

            if (dealerValue > 21) {
                // Dealer busts
                bankroll += currentBet * 2;
                wins++;
                showMessage('Dealer busts! You win $' + currentBet + '!', 'win');
                createFireworks();
            } else if (playerValue > dealerValue) {
                // Player wins
                bankroll += currentBet * 2;
                wins++;
                showMessage('You win $' + currentBet + '!', 'win');
                createFireworks();
            } else if (dealerValue > playerValue) {
                // Dealer wins
                losses++;
                showMessage('Dealer wins. You lose $' + currentBet, 'lose');
            } else {
                // Push
                bankroll += currentBet;
                showMessage('Push! Bet returned', 'push');
            }

            endRound();
        }

        // End the round
        function endRound() {
            gameInProgress = false;
            document.getElementById('game-controls').style.display = 'none';
            document.getElementById('end-controls').style.display = 'flex';
            updateDisplay(false);

            // Check if player is out of money
            if (bankroll < 5) {
                setTimeout(() => {
                    if (confirm('You\'re out of money! Would you like to start over with $1000?')) {
                        bankroll = 1000;
                        wins = 0;
                        losses = 0;
                        updateDisplay(false);
                    }
                }, 1000);
            }
        }

        // Start a new round
        function newRound() {
            playerHand = [];
            dealerHand = [];
            currentBet = 0;

            hideMessage();
            updateDisplay(false);

            document.getElementById('betting-controls').style.display = 'flex';
            document.getElementById('game-controls').style.display = 'none';
            document.getElementById('end-controls').style.display = 'none';

            // Re-enable buttons
            document.getElementById('hit-btn').disabled = false;
            document.getElementById('stand-btn').disabled = false;

            // Reset displayed values
            document.getElementById('player-value').textContent = '0';
            document.getElementById('dealer-value').textContent = '0';
            document.getElementById('player-cards').innerHTML = '';
            document.getElementById('dealer-cards').innerHTML = '';
        }

        // Initialize
        updateDisplay(false);
    </script>
</body>
</html>
