<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Julia Set Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0f;
            color: #e0e0e0;
        }

        canvas {
            display: block;
            cursor: grab;
        }

        canvas:active {
            cursor: grabbing;
        }

        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(15, 15, 25, 0.95);
            padding: 20px;
            border-radius: 12px;
            min-width: 260px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
        }

        .controls h2 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #a0a0ff;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }

        .controls h3 {
            font-size: 0.85rem;
            margin: 15px 0 10px;
            color: #8080c0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .control-group {
            margin-bottom: 12px;
        }

        .control-group label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            margin-bottom: 5px;
            color: #c0c0c0;
        }

        .control-group label span {
            color: #80c0ff;
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
            font-size: 0.8rem;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: linear-gradient(135deg, #6060ff, #a060ff);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(100, 100, 255, 0.4);
        }

        select {
            width: 100%;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #e0e0e0;
            font-size: 0.9rem;
            cursor: pointer;
            outline: none;
        }

        select:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .preset-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
        }

        button {
            padding: 8px 12px;
            background: linear-gradient(135deg, rgba(80, 80, 160, 0.6), rgba(60, 60, 120, 0.6));
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 6px;
            color: #e0e0e0;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover {
            background: linear-gradient(135deg, rgba(100, 100, 200, 0.7), rgba(80, 80, 160, 0.7));
            border-color: rgba(255, 255, 255, 0.3);
        }

        button.full-width {
            grid-column: span 2;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #6060ff;
        }

        .stats {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(15, 15, 25, 0.9);
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 12px;
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
            z-index: 100;
            min-width: 180px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            margin: 4px 0;
        }

        .stats-label {
            color: #808080;
        }

        .stats-value {
            color: #80c0ff;
        }

        .toggle-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(15, 15, 25, 0.95);
            color: #e0e0e0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            display: none;
            z-index: 101;
        }

        .hint {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(15, 15, 25, 0.9);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 12px;
            color: #808080;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 600px) {
            .controls {
                display: none;
            }

            .controls.visible {
                display: block;
                top: 60px;
                right: 10px;
                left: 10px;
                min-width: auto;
            }

            .toggle-btn {
                display: block;
            }

            .hint {
                display: none;
            }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <div class="stats">
        <div class="stats-row">
            <span class="stats-label">c</span>
            <span class="stats-value" id="statsC">-0.7 + 0.27i</span>
        </div>
        <div class="stats-row">
            <span class="stats-label">Zoom</span>
            <span class="stats-value" id="statsZoom">1.0x</span>
        </div>
        <div class="stats-row">
            <span class="stats-label">Iterations</span>
            <span class="stats-value" id="statsIter">100</span>
        </div>
        <div class="stats-row">
            <span class="stats-label">Render</span>
            <span class="stats-value" id="statsRender">0ms</span>
        </div>
    </div>

    <div class="hint">Drag to pan | Scroll to zoom | Double-click to zoom in</div>

    <button class="toggle-btn" onclick="toggleControls()">Controls</button>

    <div class="controls" id="controls">
        <h2>Julia Set Explorer</h2>

        <h3>Parameters</h3>
        <div class="control-group">
            <label>Real (c) <span id="realValue">-0.70</span></label>
            <input type="range" id="realSlider" min="-2" max="2" step="0.001" value="-0.7">
        </div>
        <div class="control-group">
            <label>Imaginary (c) <span id="imagValue">0.27</span></label>
            <input type="range" id="imagSlider" min="-2" max="2" step="0.001" value="0.27015">
        </div>
        <div class="control-group">
            <label>Max Iterations <span id="iterValue">100</span></label>
            <input type="range" id="iterSlider" min="50" max="500" step="10" value="100">
        </div>
        <div class="control-group">
            <label>Zoom <span id="zoomValue">1.0</span></label>
            <input type="range" id="zoomSlider" min="0.5" max="100" step="0.1" value="1">
        </div>
        <div class="control-group">
            <label>Center X <span id="centerXValue">0.00</span></label>
            <input type="range" id="centerXSlider" min="-2" max="2" step="0.01" value="0">
        </div>
        <div class="control-group">
            <label>Center Y <span id="centerYValue">0.00</span></label>
            <input type="range" id="centerYSlider" min="-2" max="2" step="0.01" value="0">
        </div>

        <h3>Appearance</h3>
        <div class="control-group">
            <label>Color Scheme</label>
            <select id="colorScheme">
                <option value="electric">Electric</option>
                <option value="fire">Fire</option>
                <option value="ocean">Ocean</option>
                <option value="monochrome">Monochrome</option>
                <option value="rainbow">Rainbow</option>
                <option value="neon">Neon</option>
            </select>
        </div>

        <div class="checkbox-group">
            <input type="checkbox" id="invertColors">
            <label for="invertColors">Invert Colors</label>
        </div>

        <h3>Presets</h3>
        <div class="preset-buttons">
            <button onclick="loadPreset('dendrite')">Dendrite</button>
            <button onclick="loadPreset('sanmarco')">San Marco</button>
            <button onclick="loadPreset('siegel')">Siegel Disk</button>
            <button onclick="loadPreset('rabbit')">Douady Rabbit</button>
            <button onclick="loadPreset('galaxy')">Galaxy</button>
            <button onclick="loadPreset('newton')">Newton</button>
        </div>

        <h3>Actions</h3>
        <div class="preset-buttons">
            <button onclick="resetView()">Reset View</button>
            <button onclick="resetAll()">Reset All</button>
            <button class="full-width" id="animateBtn" onclick="toggleAnimation()">Start Animation</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width, height;
        let imageData;

        // Julia set parameters
        const params = {
            cReal: -0.7,
            cImag: 0.27015,
            maxIter: 100,
            zoom: 1.0,
            centerX: 0,
            centerY: 0,
            colorScheme: 'electric',
            invertColors: false
        };

        // Animation state
        let animating = false;
        let animationFrame = null;
        let animAngle = 0;

        // Interaction state
        let isDragging = false;
        let lastMouseX = 0;
        let lastMouseY = 0;

        // Presets
        const presets = {
            dendrite: { cReal: 0, cImag: 1 },
            sanmarco: { cReal: -0.75, cImag: 0 },
            siegel: { cReal: -0.391, cImag: -0.587 },
            rabbit: { cReal: -0.123, cImag: 0.745 },
            galaxy: { cReal: -0.7, cImag: 0.27015 },
            newton: { cReal: 0, cImag: 0 }
        };

        // Color schemes
        const colorSchemes = {
            electric: (t) => {
                // Deep purple → blue → cyan → white
                if (t < 0.25) {
                    const s = t / 0.25;
                    return [Math.floor(40 + s * 30), Math.floor(s * 50), Math.floor(80 + s * 100)];
                } else if (t < 0.5) {
                    const s = (t - 0.25) / 0.25;
                    return [Math.floor(70 - s * 50), Math.floor(50 + s * 150), Math.floor(180 + s * 75)];
                } else if (t < 0.75) {
                    const s = (t - 0.5) / 0.25;
                    return [Math.floor(20 + s * 100), Math.floor(200 + s * 55), Math.floor(255)];
                } else {
                    const s = (t - 0.75) / 0.25;
                    return [Math.floor(120 + s * 135), Math.floor(255), Math.floor(255)];
                }
            },
            fire: (t) => {
                // Black → red → orange → yellow → white
                if (t < 0.25) {
                    const s = t / 0.25;
                    return [Math.floor(s * 180), 0, 0];
                } else if (t < 0.5) {
                    const s = (t - 0.25) / 0.25;
                    return [Math.floor(180 + s * 75), Math.floor(s * 100), 0];
                } else if (t < 0.75) {
                    const s = (t - 0.5) / 0.25;
                    return [255, Math.floor(100 + s * 155), Math.floor(s * 50)];
                } else {
                    const s = (t - 0.75) / 0.25;
                    return [255, 255, Math.floor(50 + s * 205)];
                }
            },
            ocean: (t) => {
                // Dark blue → teal → aqua → white
                if (t < 0.33) {
                    const s = t / 0.33;
                    return [0, Math.floor(s * 80), Math.floor(60 + s * 100)];
                } else if (t < 0.66) {
                    const s = (t - 0.33) / 0.33;
                    return [Math.floor(s * 50), Math.floor(80 + s * 120), Math.floor(160 + s * 95)];
                } else {
                    const s = (t - 0.66) / 0.34;
                    return [Math.floor(50 + s * 205), Math.floor(200 + s * 55), 255];
                }
            },
            monochrome: (t) => {
                const v = Math.floor(t * 255);
                return [v, v, v];
            },
            rainbow: (t) => {
                const h = t * 360;
                const s = 0.8;
                const l = 0.5;
                return hslToRgb(h, s, l);
            },
            neon: (t) => {
                // Black → magenta → pink → white
                if (t < 0.33) {
                    const s = t / 0.33;
                    return [Math.floor(s * 200), 0, Math.floor(s * 150)];
                } else if (t < 0.66) {
                    const s = (t - 0.33) / 0.33;
                    return [Math.floor(200 + s * 55), Math.floor(s * 100), Math.floor(150 + s * 105)];
                } else {
                    const s = (t - 0.66) / 0.34;
                    return [255, Math.floor(100 + s * 155), 255];
                }
            }
        };

        function hslToRgb(h, s, l) {
            h /= 360;
            let r, g, b;
            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            return [Math.floor(r * 255), Math.floor(g * 255), Math.floor(b * 255)];
        }

        function init() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            imageData = ctx.createImageData(width, height);
            render();
        }

        function render() {
            const startTime = performance.now();
            const data = imageData.data;
            const colorFn = colorSchemes[params.colorScheme];

            const aspectRatio = width / height;
            const scale = 4 / params.zoom;

            for (let py = 0; py < height; py++) {
                for (let px = 0; px < width; px++) {
                    // Map pixel to complex plane
                    let zx = (px - width / 2) / (width / 4) / params.zoom + params.centerX;
                    let zy = (py - height / 2) / (height / 4) / params.zoom + params.centerY;

                    let iteration = 0;

                    // Julia set iteration: z = z² + c
                    while (zx * zx + zy * zy < 4 && iteration < params.maxIter) {
                        const xtemp = zx * zx - zy * zy + params.cReal;
                        zy = 2 * zx * zy + params.cImag;
                        zx = xtemp;
                        iteration++;
                    }

                    const idx = (py * width + px) * 4;

                    if (iteration === params.maxIter) {
                        // Inside the set - black
                        data[idx] = 0;
                        data[idx + 1] = 0;
                        data[idx + 2] = 0;
                    } else {
                        // Smooth coloring
                        const smoothed = iteration + 1 - Math.log(Math.log(Math.sqrt(zx * zx + zy * zy))) / Math.log(2);
                        let t = smoothed / params.maxIter;
                        t = Math.max(0, Math.min(1, t));

                        if (params.invertColors) {
                            t = 1 - t;
                        }

                        const [r, g, b] = colorFn(t);
                        data[idx] = r;
                        data[idx + 1] = g;
                        data[idx + 2] = b;
                    }
                    data[idx + 3] = 255;
                }
            }

            ctx.putImageData(imageData, 0, 0);

            const renderTime = Math.round(performance.now() - startTime);
            updateStats(renderTime);
        }

        function updateStats(renderTime) {
            const sign = params.cImag >= 0 ? '+' : '';
            document.getElementById('statsC').textContent =
                `${params.cReal.toFixed(3)} ${sign} ${params.cImag.toFixed(3)}i`;
            document.getElementById('statsZoom').textContent = `${params.zoom.toFixed(1)}x`;
            document.getElementById('statsIter').textContent = params.maxIter;
            document.getElementById('statsRender').textContent = `${renderTime}ms`;
        }

        function updateSliderDisplays() {
            document.getElementById('realValue').textContent = params.cReal.toFixed(2);
            document.getElementById('imagValue').textContent = params.cImag.toFixed(2);
            document.getElementById('iterValue').textContent = params.maxIter;
            document.getElementById('zoomValue').textContent = params.zoom.toFixed(1);
            document.getElementById('centerXValue').textContent = params.centerX.toFixed(2);
            document.getElementById('centerYValue').textContent = params.centerY.toFixed(2);
        }

        function loadPreset(name) {
            const preset = presets[name];
            if (preset) {
                params.cReal = preset.cReal;
                params.cImag = preset.cImag;
                document.getElementById('realSlider').value = params.cReal;
                document.getElementById('imagSlider').value = params.cImag;
                updateSliderDisplays();
                render();
            }
        }

        function resetView() {
            params.zoom = 1;
            params.centerX = 0;
            params.centerY = 0;
            document.getElementById('zoomSlider').value = params.zoom;
            document.getElementById('centerXSlider').value = params.centerX;
            document.getElementById('centerYSlider').value = params.centerY;
            updateSliderDisplays();
            render();
        }

        function resetAll() {
            params.cReal = -0.7;
            params.cImag = 0.27015;
            params.maxIter = 100;
            params.zoom = 1;
            params.centerX = 0;
            params.centerY = 0;
            params.colorScheme = 'electric';
            params.invertColors = false;

            document.getElementById('realSlider').value = params.cReal;
            document.getElementById('imagSlider').value = params.cImag;
            document.getElementById('iterSlider').value = params.maxIter;
            document.getElementById('zoomSlider').value = params.zoom;
            document.getElementById('centerXSlider').value = params.centerX;
            document.getElementById('centerYSlider').value = params.centerY;
            document.getElementById('colorScheme').value = params.colorScheme;
            document.getElementById('invertColors').checked = params.invertColors;

            updateSliderDisplays();
            render();
        }

        function toggleAnimation() {
            animating = !animating;
            document.getElementById('animateBtn').textContent = animating ? 'Stop Animation' : 'Start Animation';
            if (animating) {
                animate();
            } else if (animationFrame) {
                cancelAnimationFrame(animationFrame);
            }
        }

        function animate() {
            if (!animating) return;

            animAngle += 0.02;
            params.cReal = 0.7885 * Math.cos(animAngle);
            params.cImag = 0.7885 * Math.sin(animAngle);

            document.getElementById('realSlider').value = params.cReal;
            document.getElementById('imagSlider').value = params.cImag;
            updateSliderDisplays();

            render();
            animationFrame = requestAnimationFrame(animate);
        }

        function toggleControls() {
            document.getElementById('controls').classList.toggle('visible');
        }

        // Event listeners for controls
        function setupControls() {
            document.getElementById('realSlider').addEventListener('input', (e) => {
                params.cReal = parseFloat(e.target.value);
                document.getElementById('realValue').textContent = params.cReal.toFixed(2);
                render();
            });

            document.getElementById('imagSlider').addEventListener('input', (e) => {
                params.cImag = parseFloat(e.target.value);
                document.getElementById('imagValue').textContent = params.cImag.toFixed(2);
                render();
            });

            document.getElementById('iterSlider').addEventListener('input', (e) => {
                params.maxIter = parseInt(e.target.value);
                document.getElementById('iterValue').textContent = params.maxIter;
                render();
            });

            document.getElementById('zoomSlider').addEventListener('input', (e) => {
                params.zoom = parseFloat(e.target.value);
                document.getElementById('zoomValue').textContent = params.zoom.toFixed(1);
                render();
            });

            document.getElementById('centerXSlider').addEventListener('input', (e) => {
                params.centerX = parseFloat(e.target.value);
                document.getElementById('centerXValue').textContent = params.centerX.toFixed(2);
                render();
            });

            document.getElementById('centerYSlider').addEventListener('input', (e) => {
                params.centerY = parseFloat(e.target.value);
                document.getElementById('centerYValue').textContent = params.centerY.toFixed(2);
                render();
            });

            document.getElementById('colorScheme').addEventListener('change', (e) => {
                params.colorScheme = e.target.value;
                render();
            });

            document.getElementById('invertColors').addEventListener('change', (e) => {
                params.invertColors = e.target.checked;
                render();
            });
        }

        // Mouse interactions
        canvas.addEventListener('mousedown', (e) => {
            isDragging = true;
            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
        });

        canvas.addEventListener('mousemove', (e) => {
            if (!isDragging) return;

            const dx = e.clientX - lastMouseX;
            const dy = e.clientY - lastMouseY;

            params.centerX -= dx / (width / 4) / params.zoom;
            params.centerY -= dy / (height / 4) / params.zoom;

            // Update slider positions
            document.getElementById('centerXSlider').value = Math.max(-2, Math.min(2, params.centerX));
            document.getElementById('centerYSlider').value = Math.max(-2, Math.min(2, params.centerY));
            updateSliderDisplays();

            lastMouseX = e.clientX;
            lastMouseY = e.clientY;

            render();
        });

        canvas.addEventListener('mouseup', () => {
            isDragging = false;
        });

        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
        });

        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;
            params.zoom *= zoomFactor;
            params.zoom = Math.max(0.5, Math.min(100, params.zoom));

            document.getElementById('zoomSlider').value = params.zoom;
            document.getElementById('zoomValue').textContent = params.zoom.toFixed(1);

            render();
        });

        canvas.addEventListener('dblclick', (e) => {
            // Zoom in at clicked point
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            // Convert click to complex coordinates
            const clickX = (x - width / 2) / (width / 4) / params.zoom + params.centerX;
            const clickY = (y - height / 2) / (height / 4) / params.zoom + params.centerY;

            // Move center towards click and zoom in
            params.centerX = clickX;
            params.centerY = clickY;
            params.zoom *= 2;
            params.zoom = Math.min(100, params.zoom);

            document.getElementById('zoomSlider').value = params.zoom;
            document.getElementById('centerXSlider').value = Math.max(-2, Math.min(2, params.centerX));
            document.getElementById('centerYSlider').value = Math.max(-2, Math.min(2, params.centerY));
            updateSliderDisplays();

            render();
        });

        // Touch support
        let lastTouchDist = 0;
        let lastTouchX = 0;
        let lastTouchY = 0;

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (e.touches.length === 1) {
                lastTouchX = e.touches[0].clientX;
                lastTouchY = e.touches[0].clientY;
            } else if (e.touches.length === 2) {
                const dx = e.touches[1].clientX - e.touches[0].clientX;
                const dy = e.touches[1].clientY - e.touches[0].clientY;
                lastTouchDist = Math.sqrt(dx * dx + dy * dy);
            }
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (e.touches.length === 1) {
                const dx = e.touches[0].clientX - lastTouchX;
                const dy = e.touches[0].clientY - lastTouchY;

                params.centerX -= dx / (width / 4) / params.zoom;
                params.centerY -= dy / (height / 4) / params.zoom;

                lastTouchX = e.touches[0].clientX;
                lastTouchY = e.touches[0].clientY;

                render();
            } else if (e.touches.length === 2) {
                const dx = e.touches[1].clientX - e.touches[0].clientX;
                const dy = e.touches[1].clientY - e.touches[0].clientY;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (lastTouchDist > 0) {
                    const scale = dist / lastTouchDist;
                    params.zoom *= scale;
                    params.zoom = Math.max(0.5, Math.min(100, params.zoom));
                }

                lastTouchDist = dist;
                render();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            const step = 0.1 / params.zoom;

            switch (e.key) {
                case 'ArrowLeft':
                    params.centerX -= step;
                    break;
                case 'ArrowRight':
                    params.centerX += step;
                    break;
                case 'ArrowUp':
                    params.centerY -= step;
                    break;
                case 'ArrowDown':
                    params.centerY += step;
                    break;
                case '+':
                case '=':
                    params.zoom *= 1.2;
                    params.zoom = Math.min(100, params.zoom);
                    break;
                case '-':
                    params.zoom *= 0.8;
                    params.zoom = Math.max(0.5, params.zoom);
                    break;
                case 'r':
                case 'R':
                    resetView();
                    return;
                case ' ':
                    e.preventDefault();
                    toggleAnimation();
                    return;
                case '1':
                    params.colorScheme = 'electric';
                    document.getElementById('colorScheme').value = 'electric';
                    break;
                case '2':
                    params.colorScheme = 'fire';
                    document.getElementById('colorScheme').value = 'fire';
                    break;
                case '3':
                    params.colorScheme = 'ocean';
                    document.getElementById('colorScheme').value = 'ocean';
                    break;
                case '4':
                    params.colorScheme = 'monochrome';
                    document.getElementById('colorScheme').value = 'monochrome';
                    break;
                case '5':
                    params.colorScheme = 'rainbow';
                    document.getElementById('colorScheme').value = 'rainbow';
                    break;
                case '6':
                    params.colorScheme = 'neon';
                    document.getElementById('colorScheme').value = 'neon';
                    break;
                default:
                    return;
            }

            document.getElementById('zoomSlider').value = params.zoom;
            document.getElementById('centerXSlider').value = Math.max(-2, Math.min(2, params.centerX));
            document.getElementById('centerYSlider').value = Math.max(-2, Math.min(2, params.centerY));
            updateSliderDisplays();
            render();
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            init();
        });

        // Initialize
        setupControls();
        init();
    </script>
</body>
</html>
